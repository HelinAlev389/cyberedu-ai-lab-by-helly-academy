{% extends 'base.html' %}
{% block content %}

<div class="max-w-4xl mx-auto px-6 py-10 space-y-8">
  <h1 class="text-3xl font-bold text-gray-800 animate-fade-in">üìò –£—Ä–æ–∫: –û—Å–Ω–æ–≤–∏ –Ω–∞ {{ g.ai_session.config.get('topic', '–º—Ä–µ–∂–æ–≤–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç') }}</h1>

  <!-- –£–†–û–ö -->
  <div class="bg-white rounded-2xl shadow-md p-6 space-y-6 animate-slide-in">
    <article class="prose max-w-none text-gray-800">
      {{ lesson|safe }}
    </article>
  </div>
<div id="lesson-player"></div>
<script src="{{ url_for('static', filename='js/lesson_presentation.js') }}"></script>
<script>
  const lessonSteps = [
    { type: "text", content: "<h2>üîê –û—Å–Ω–æ–≤–∏ –Ω–∞ –º—Ä–µ–∂–æ–≤–∞ —Å–∏–≥—É—Ä–Ω–æ—Å—Ç</h2><p>–©–µ –Ω–∞—É—á–∏–º –∫–∞–∫–≤–æ –µ IP, firewall –∏ –¥—Ä—É–≥–∏.</p>" },
    { type: "image", src: "/static/uploads/firewall-diagram.png" },
    { type: "video", src: "https://www.youtube.com/embed/dQw4w9WgXcQ" },
    {
      type: "question",
      question: "–ö–∞–∫–≤–æ –µ IP –∞–¥—Ä–µ—Å?",
      options: ["–£–Ω–∏–∫–∞–ª–µ–Ω –Ω–æ–º–µ—Ä –≤ –º—Ä–µ–∂–∞—Ç–∞", "–ü–∞—Ä–æ–ª–∞", "MAC –∞–¥—Ä–µ—Å"]
    },
    { type: "text", content: "<p>IP –∞–¥—Ä–µ—Å—ä—Ç –µ –∫–∞—Ç–æ –∞–¥—Ä–µ—Å –Ω–∞ —Ç–≤–æ—è –∫–æ–º–ø—é—Ç—ä—Ä –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç.</p>" }
  ];
</script>
<script src="/static/js/lesson_presentation.js"></script>


  <!-- –¢–ï–°–¢ -->
  <form method="POST" action="{{ url_for('ai_teacher.exercise') }}" class="bg-gray-50 rounded-xl p-6 shadow space-y-6">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

    <h2 class="text-xl font-semibold text-gray-800">üìù –ö–æ–Ω—Ç—Ä–æ–ª–Ω–∏ –≤—ä–ø—Ä–æ—Å–∏</h2>

    <div class="space-y-4">
      {% for q in quiz %}
        <div class="p-4 bg-white border border-gray-200 rounded-xl">
          <label for="q{{ q['id'] }}" class="block font-medium text-gray-700 mb-2">{{ loop.index }}. {{ q['question'] }}</label>
          <input type="text" name="q{{ q['id'] }}" id="q{{ q['id'] }}"
                 class="w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
        </div>
      {% endfor %}
    </div>

    <div class="text-right">
      <button type="submit" class="bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-6 rounded-lg transition">
        –ü–æ–¥–∞–π –æ—Ç–≥–æ–≤–æ—Ä–∏—Ç–µ
      </button>
    </div>
  </form>
</div>

{% endblock %}
