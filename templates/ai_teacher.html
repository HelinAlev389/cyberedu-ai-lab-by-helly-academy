{% extends "base.html" %}
{% block content %}
<h2>–í–∏—Ä—Ç—É–∞–ª–µ–Ω AI —É—á–∏—Ç–µ–ª</h2>
<a href="{{ url_for('ai_teacher.lesson') }}"
     class="btn btn-lg btn-primary mb-4">
    üìò –ó–∞–ø–æ—á–Ω–∏ —É—Ä–æ–∫–∞
  </a>
<!-- Button to upload a JSON log for analysis -->
<form id="upload-log-form"
      action="{{ url_for('ai_teacher.upload_log') }}"
      method="POST"
      enctype="multipart/form-data"
      class="mb-4">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

  <input type="file" name="logfile" accept=".json" required>
  <button type="submit" class="btn btn-warning">üìÇ –ö–∞—á–∏ –ª–æ–≥ –∑–∞ –∞–Ω–∞–ª–∏–∑</button>
</form>

<div id="chat-container">
  <div id="messages"></div>
  <input id="user-input" type="text" placeholder="–ù–∞–ø–∏—à–∏ —Å—ä–æ–±—â–µ–Ω–∏–µ...">
  <button id="send-btn">–ò–∑–ø—Ä–∞—Ç–∏</button>
</div>
{% if last_step %}
  <p class="text-sm text-gray-600 mb-4">üïì –ü–æ—Å–ª–µ–¥–Ω–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç: {{ last_step }}</p>
  <a href="{{ url_for('ai_teacher.lesson') if last_step == 'lesson' else url_for('ai_teacher.exercise') }}"
     class="bg-indigo-600 text-white px-4 py-2 rounded">
     –ü—Ä–æ–¥—ä–ª–∂–∏ –æ—Ç {{ last_step }}
  </a>
{% endif %}


<script src="{{ url_for('static', filename='ai_teacher.js') }}"></script>
{% endblock %}