{% extends "base.html" %}

{% block content %}
<!-- EasyMDE CSS -->
<link rel="stylesheet" href="https://unpkg.com/easymde/dist/easymde.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

<style>
.lesson-content pre {
  background-color: #f8f9fa;
  padding: 1rem;
  border-radius: 8px;
  overflow-x: auto;
}
.lesson-content code {
  background-color: #f1f1f1;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: monospace;
}
.lesson-content table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 1rem;
}
.lesson-content th, .lesson-content td {
  border: 1px solid #dee2e6;
  padding: 0.75rem;
}
.lesson-content th {
  background-color: #f1f3f5;
}
</style>

<div class="container mt-5 mb-5">
  <div class="bg-white p-5 shadow rounded-3 border">
    <h2 class="display-5 fw-bold text-primary mb-3">{{ lesson.title }}</h2>
    <p><span class="badge bg-secondary fs-6">{{ lesson.topic }}</span></p>

    <div class="lesson-content mt-4 text-body" style="line-height: 1.8; font-size: 1.1rem;">
      {{ html_content | safe }}
    </div>

    <hr class="my-5">

    {% if recommended %}
      <h4 class="mb-4">üìö –ü—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–∏ —É—Ä–æ—Ü–∏</h4>
      {% if lessons %}
        <div class="row">
          {% for lesson in lessons %}
          <div class="col-md-6 col-lg-4 mb-4">
            <div class="card shadow-sm h-100 border-0">
              <div class="card-body d-flex flex-column justify-content-between">
                <div>
                  <h5 class="card-title text-primary">{{ lesson.title }}</h5>
                  <p class="text-muted"><i class="bi bi-book"></i> {{ lesson.topic }}</p>
                  <span class="badge bg-info text-dark">AI Lesson</span>
                </div>
                <a href="{{ url_for('teacher_dashboard.view_lesson', lesson_id=lesson.id) }}"
                   class="btn btn-outline-primary mt-3">üìñ –ü—Ä–µ–≥–ª–µ–¥ –Ω–∞ —É—Ä–æ–∫–∞</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      {% else %}
        <p class="text-muted">‚ùó –ù—è–º–∞ –ø—Ä–µ–ø–æ—Ä—ä—á–∞–Ω–∏ —É—Ä–æ—Ü–∏ –∑–∞ –º–æ–º–µ–Ω—Ç–∞.</p>
      {% endif %}
    {% endif %}

    <a href="{{ url_for('teacher_dashboard.manage_lessons') }}" class="btn btn-outline-secondary mt-4">
      ‚Üê –ù–∞–∑–∞–¥ –∫—ä–º —É—Ä–æ—Ü–∏
    </a>
  </div>
</div>

<!-- EasyMDE JS -->
<script src="https://unpkg.com/easymde/dist/easymde.min.js"></script>
{% endblock %}
